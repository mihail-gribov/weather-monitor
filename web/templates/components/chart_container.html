<!-- Chart Container Component -->
<div class="chart-container-wrapper">
    <!-- Chart Controls -->
    <div class="chart-controls mb-3">
        <div class="row align-items-center">
            <div class="col-md-6">
                <div class="chart-info">
                    <span class="chart-title" id="chart-title">Weather Data</span>
                    <small class="text-muted" id="chart-subtitle"></small>
                </div>
            </div>
            <div class="col-md-6 text-end">
                <div class="btn-group" role="group" aria-label="Chart controls">
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="reset-zoom-btn" title="Reset zoom">
                        <i class="fas fa-search-minus"></i>
                    </button>
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="export-png-btn" title="Export as PNG">
                        <i class="fas fa-download"></i> PNG
                    </button>
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="export-svg-btn" title="Export as SVG">
                        <i class="fas fa-download"></i> SVG
                    </button>
                    <button type="button" class="btn btn-outline-secondary btn-sm" id="export-data-btn" title="Export data">
                        <i class="fas fa-file-export"></i> Data
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chart Loading Indicator -->
    <div id="chart-loading" style="display: none;">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading chart...</span>
        </div>
        <p>Loading chart data...</p>
    </div>

    <!-- Chart Error Message -->
    <div id="chart-error" class="chart-error" style="display: none;">
        <div class="alert alert-danger" role="alert">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <span id="chart-error-text">An error occurred while loading the chart.</span>
        </div>
    </div>

    <!-- Main Chart Container -->
    <div class="chart-container">
        <div id="main-chart" class="weather-chart"></div>
    </div>

    <!-- Chart Legend -->
    <div class="chart-legend mt-3">
        <div class="row">
            <div class="col-md-8">
                <div class="legend-info">
                    <small class="text-muted">
                        <i class="fas fa-info-circle me-1"></i>
                        Click on legend items to show/hide data series. Double-click to reset zoom.
                    </small>
                </div>
            </div>
            <div class="col-md-4 text-end">
                <div class="chart-stats">
                    <small class="text-muted">
                        <span id="data-points-count">0</span> data points
                        <span class="mx-2">â€¢</span>
                        <span id="regions-count">0</span> regions
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Chart Container Styles -->
<style>
.chart-container-wrapper {
    background: #fff;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.chart-controls {
    border-bottom: 1px solid #e9ecef;
    padding-bottom: 15px;
}

.chart-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: #333;
}

.chart-subtitle {
    display: block;
    margin-top: 2px;
}

.chart-loading {
    /* Styles moved to dashboard.css */
}

.chart-error {
    padding: 20px;
}

.chart-container {
    position: relative;
    min-height: 400px;
    background: #fafafa;
    border-radius: 4px;
    overflow: hidden;
}

.weather-chart {
    width: 100%;
    height: 500px;
    background: #fff;
}

.chart-legend {
    border-top: 1px solid #e9ecef;
    padding-top: 15px;
}

.legend-info {
    line-height: 1.4;
}

.chart-stats {
    line-height: 1.4;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .chart-container-wrapper {
        padding: 15px;
    }
    
    .chart-controls .btn-group {
        width: 100%;
        margin-top: 10px;
    }
    
    .chart-controls .btn-group .btn {
        flex: 1;
        font-size: 0.8rem;
    }
    
    .weather-chart {
        height: 350px;
    }
    
    .chart-title {
        font-size: 1rem;
    }
}

/* Dark theme support */
@media (prefers-color-scheme: dark) {
    .chart-container-wrapper {
        background: #2d3748;
        color: #e2e8f0;
    }
    
    .chart-title {
        color: #e2e8f0;
    }
    
    .chart-container {
        background: #1a202c;
    }
    
    .weather-chart {
        background: #1a202c;
    }
    
    .chart-controls,
    .chart-legend {
        border-color: #4a5568;
    }
}
</style>
